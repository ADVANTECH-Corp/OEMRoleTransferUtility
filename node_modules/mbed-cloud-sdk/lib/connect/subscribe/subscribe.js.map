{"version":3,"sources":["connect/subscribe/subscribe.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;EAeE;;AAGF,mFAAkF;AAIlF;IAMI,mBAAY,QAAqB;QAC7B,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;QAC5B,CAAC;QACD,IAAI,CAAC,oBAAoB,GAAG,IAAI,KAAK,EAAE,CAAC;IAC5C,CAAC;IAED;;;;;;;;;;;;;OAaG;IACI,+BAAW,GAAlB,UAAmB,MAA0B;QACzC,IAAM,QAAQ,GAAG,IAAI,yCAAmB,CAAC,MAAM,CAAC,CAAC;QACjD,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACf,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACpC,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;YACtC,CAAC;QACL,CAAC;QAED,MAAM,CAAC,QAAQ,CAAC;IACpB,CAAC;IAED;;;OAGG;IACI,0BAAM,GAAb,UAAc,IAA2B;QACrC,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,UAAA,QAAQ,IAAI,OAAA,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAArB,CAAqB,CAAC,CAAC;IACzE,CAAC;IACL,gBAAC;AAAD,CA9CA,AA8CC,IAAA;AA9CY,8BAAS","file":"subscribe.js","sourcesContent":["/*\n* Mbed Cloud JavaScript SDK\n* Copyright Arm Limited 2017\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n* http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\nimport { ConnectApi } from \"../connectApi\";\nimport { DeviceStateObserver } from \"./observers/DeviceState/deviceStateObserver\";\nimport { DeviceEvent, DeviceEventFilter } from \"../types\";\nimport { Resource } from \"../models/resource\";\n\nexport class Subscribe {\n\n    private connect: ConnectApi;\n\n    private deviceStateObservers: Array<DeviceStateObserver>;\n\n    constructor(_connect?: ConnectApi) {\n        if (_connect) {\n            this.connect = _connect;\n        }\n        this.deviceStateObservers = new Array();\n    }\n\n    /**\n     * Returns a deviceStateObserver that is listening for device events.\n     * To subscribe to specific events or devices, a DeviceEventFilter must be provided.\n     *\n     * Example: subscribe to device registration events.\n     *\n     * ```javascript\n     * const observer = connect.subscribe.deviceState({ event: \"registrations\" });\n     * // add a callback\n     * observer.addCallback(res => console.log(res));\n     * ```\n     *\n     * @param filter the deviceEventFilter\n     */\n    public deviceState(filter?: DeviceEventFilter): DeviceStateObserver {\n        const observer = new DeviceStateObserver(filter);\n        this.deviceStateObservers.push(observer);\n        if (this.connect) {\n            if (!this.connect.handleNotifications) {\n                this.connect.startNotifications();\n            }\n        }\n\n        return observer;\n    }\n\n    /**\n     * Notify all observers\n     * @param data\n     */\n    public notify(data: DeviceEvent<Resource>): void {\n        this.deviceStateObservers.forEach(observer => observer.notify(data));\n    }\n}\n"],"sourceRoot":"../../../src"}